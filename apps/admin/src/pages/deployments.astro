---
import AdminLayout from '../layouts/AdminLayout.astro';
import { Card, Table, GSButton } from '@goldshore/ui';

const deployments = [
  { id: '#248', env: 'Production', status: 'Live', when: 'Today 09:20' },
  { id: '#247', env: 'Preview', status: 'Completed', when: 'Yesterday' },
  { id: '#246', env: 'Production', status: 'Rollback', when: '2 days ago' },
];
---
<AdminLayout title="Deployments">
  <section class="gs-grid columns-2">
    <Card class="gs-table-card">
      <div class="section-title"><span>⇪</span><h3>History</h3></div>
      <Table>
        <thead><tr><th>Release</th><th>Env</th><th>Status</th><th>When</th></tr></thead>
        <tbody>
          {deployments.map((deploy) => (
            <tr>
              <td>{deploy.id}</td>
              <td>{deploy.env}</td>
              <td><span class={`gs-badge ${deploy.status === 'Rollback' ? 'danger' : 'success'}`}>{deploy.status}</span></td>
              <td>{deploy.when}</td>
            </tr>
          ))}
        </tbody>
      </Table>
    </Card>

    <Card>
      <div class="section-title"><span>⚙</span><h3>Controls</h3></div>
      <p class="gs-helper">Promote preview to production or pause rollouts.</p>
      <div class="gs-form-actions">
        <GSButton class="gs-button--small">Promote latest</GSButton>
        <GSButton variant="secondary" class="gs-button--small">Pause rollouts</GSButton>
      </div>
    </Card>
  </section>
</AdminLayout>
