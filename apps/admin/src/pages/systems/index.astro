---
import AdminLayout from '../../layouts/AdminLayout.astro';
import { Card, Table } from '@goldshore/ui';

const services = [
  { id: 'gs-web', label: 'Web (Pages)', role: 'Public site', url: 'https://goldshore.ai', status: 'online' },
  { id: 'gs-admin', label: 'Admin (Pages)', role: 'Control panel', url: 'https://admin.goldshore.ai', status: 'online' },
  { id: 'gs-api', label: 'API Worker', role: 'Core API', url: 'https://api.goldshore.ai', status: 'online' },
  { id: 'gs-gateway', label: 'Gateway Worker', role: 'Routing /api/*', url: 'https://gw.goldshore.ai', status: 'unknown' },
  { id: 'gs-control', label: 'Control Worker', role: 'Infra automation', url: 'https://ops.goldshore.ai', status: 'unknown' },
  { id: 'gs-mail', label: 'Mail Worker', role: 'Email routing', url: 'https://gs-mail.goldshore.workers.dev', status: 'unknown' }
];

const checks = [
  { name: 'TLS', result: 'Pass', detail: 'Certificates valid' },
  { name: 'Edge cache', result: 'Pass', detail: 'Assets cached in 14 PoPs' },
  { name: 'Queue depth', result: 'Watch', detail: '2.4k pending jobs' },
];
---
<AdminLayout title="Systems">
  <section class="gs-grid columns-3">
    {services.map((svc) => (
      <Card>
        <header class="section-title"><span>◆</span><h3>{svc.label}</h3></header>
        <p class="gs-helper">{svc.role}</p>
        <a href={svc.url} class="gs-helper">{svc.url}</a>
        <span class={`gs-badge ${svc.status === 'online' ? 'success' : 'warning'} gs-mt-3`}>
          {svc.status === 'online' ? 'Online' : 'Pending check'}
        </span>
      </Card>
    ))}
  </section>

  <Card class="gs-table-card gs-mt-6">
    <div class="section-title"><span>◎</span><h3>Recent system checks</h3></div>
    <Table>
      <thead><tr><th>Check</th><th>Status</th><th>Detail</th></tr></thead>
      <tbody>
        {checks.map((check) => (
          <tr>
            <td>{check.name}</td>
            <td><span class={`gs-badge ${check.result === 'Pass' ? 'success' : 'warning'}`}>{check.result}</span></td>
            <td>{check.detail}</td>
          </tr>
        ))}
      </tbody>
    </Table>
  </Card>
</AdminLayout>
