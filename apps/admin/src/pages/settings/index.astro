---
import AdminLayout from '../../layouts/AdminLayout.astro';
import { Card, GSButton } from '@goldshore/ui';

const domains = [
  'goldshore.ai â†’ gs-web (Cloudflare Pages)',
  'admin.goldshore.ai â†’ gs-admin',
  'api.goldshore.ai â†’ gs-api',
  'gw.goldshore.ai â†’ gs-gateway',
  'ops.goldshore.ai â†’ gs-control',
  'Mail routing â†’ gs-mail worker'
];
---
<AdminLayout title="Settings">
  <section class="gs-grid columns-2">
    <Card>
      <div class="section-title"><span>ğŸŒ</span><h3>Domain & DNS</h3></div>
      <ul>
        {domains.map((domain) => (
          <li>{domain}</li>
        ))}
      </ul>
    </Card>
    <Card>
      <div class="section-title"><span>ğŸ›¡</span><h3>Access & Identity</h3></div>
      <p class="gs-helper">Cloudflare Access policies for admin, workers, and developer endpoints.</p>
      <ul>
        <li>Admin locked behind Access and OTP.</li>
        <li>Workers restricted with Access JWT audience.</li>
        <li>Per-client tenants planned.</li>
      </ul>
    </Card>
  </section>

  <section class="gs-grid columns-2 gs-mt-6">
    <Card>
      <div class="section-title"><span>ğŸ¨</span><h3>Theme</h3></div>
      <form id="theme-form" class="gs-form-row">
        <div class="gs-input-group">
          <label for="mode">Mode</label>
          <select id="mode" name="mode">
            <option value="dark">Dark</option>
            <option value="light">Light</option>
            <option value="slate">Slate</option>
          </select>
        </div>
        <div class="gs-input-group">
          <label for="density">Density</label>
          <select id="density" name="density">
            <option value="comfortable">Comfortable</option>
            <option value="compact">Compact</option>
          </select>
        </div>
        <div class="gs-input-group">
          <label for="accent">Accent</label>
          <select id="accent" name="accent">
            <option value="blue">Blue</option>
            <option value="gold">Gold</option>
            <option value="cyan">Cyan</option>
            <option value="violet">Violet</option>
          </select>
        </div>
      </form>
      <div class="gs-helper">Changes persist locally and apply instantly across admin pages.</div>
      <div class="gs-form-actions">
        <GSButton id="reset-theme" type="button" variant="secondary" class="gs-button--small">Reset to defaults</GSButton>
      </div>
    </Card>

    <Card>
      <div class="section-title"><span>âœ‰</span><h3>Email Routing</h3></div>
      <ul>
        <li>noreply@goldshore.ai â†’ archive / log only</li>
        <li>ops@goldshore.ai â†’ primary admin inbox</li>
        <li>support@goldshore.ai â†’ unified support inbox</li>
        <li>Catch-all routed through classification worker</li>
      </ul>
    </Card>
  </section>
</AdminLayout>

<script type="module">
  import { loadThemeSettings, setTheme } from '@goldshore/theme/manager';

  const form = document.getElementById('theme-form');
  const reset = document.getElementById('reset-theme');
  const settings = loadThemeSettings();

  if (form) {
    form.mode.value = settings.mode;
    form.density.value = settings.density;
    form.accent.value = settings.accent;

    form.addEventListener('change', () => {
      const mode = form.mode.value;
      const density = form.density.value;
      const accent = form.accent.value;
      setTheme({ mode, density, accent });
    });
  }

  reset?.addEventListener('click', () => {
    setTheme({ mode: 'dark', density: 'comfortable', accent: 'blue' });
    if (form) {
      form.mode.value = 'dark';
      form.density.value = 'comfortable';
      form.accent.value = 'blue';
    }
  });
</script>
