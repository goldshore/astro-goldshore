---
import AdminLayout from '../layouts/AdminLayout.astro';
import { Card, Table, GSButton } from '@goldshore/ui';

const pipelines = [
  { name: 'Signal intake', status: 'Healthy', latency: '12ms' },
  { name: 'Inference', status: 'Drifting', latency: '44ms' },
  { name: 'Reporting', status: 'Healthy', latency: '18ms' },
];

const releases = [
  { version: 'v1.8.4', status: 'Completed', time: 'Today 09:20' },
  { version: 'v1.8.3', status: 'Completed', time: 'Yesterday' },
  { version: 'v1.8.2', status: 'Rollback', time: '2 days ago' },
];
---
<AdminLayout title="Operations Dashboard">
  <section class="gs-grid columns-3">
    {pipelines.map((pipe) => (
      <Card>
        <div class="section-title"><span>▪</span><h3>{pipe.name}</h3></div>
        <p class="gs-helper">Latency: {pipe.latency}</p>
        <span class={`gs-badge ${pipe.status === 'Healthy' ? 'success' : 'warning'}`}>{pipe.status}</span>
      </Card>
    ))}
  </section>

  <section class="gs-grid columns-2 gs-mt-6">
    <Card class="gs-table-card">
      <div class="section-title"><span>⇡</span><h3>Release train</h3></div>
      <Table>
        <thead><tr><th>Version</th><th>Status</th><th>Time</th></tr></thead>
        <tbody>
          {releases.map((release) => (
            <tr>
              <td>{release.version}</td>
              <td><span class={`gs-badge ${release.status === 'Rollback' ? 'danger' : 'success'}`}>{release.status}</span></td>
              <td>{release.time}</td>
            </tr>
          ))}
        </tbody>
      </Table>
    </Card>
    <Card>
      <div class="section-title"><span>☍</span><h3>Playbooks</h3></div>
      <p class="gs-helper">Standardized responses for incidents and reviews.</p>
      <div class="gs-pill-list">
        <span class="gs-badge">Failover</span>
        <span class="gs-badge">Access review</span>
        <span class="gs-badge">Chaos drill</span>
      </div>
      <div class="gs-form-actions">
        <GSButton class="gs-button--small">Run check</GSButton>
        <GSButton variant="secondary" class="gs-button--small">Schedule</GSButton>
      </div>
    </Card>
  </section>
</AdminLayout>
