---
import { getCollection } from 'astro:content';

const { currentSlug } = Astro.props;
const pages = await getCollection('docs');

// Sort by optional "order" key
pages.sort((a, b) => (a.data.order ?? 999) - (b.data.order ?? 999));

---

<aside class="sidebar">
  <h3>Documentation</h3>

  {pages.map((p) => {
    const active = currentSlug === p.slug;
    const href = p.slug === 'index' ? '/developer/docs' : `/developer/docs/${p.slug}`;
    return (
      <div class="item">
        <a href={href} class={active ? 'active' : ''}>{p.data.title}</a>
      </div>
    );
  })}
</aside>

<style>
  .sidebar a.active {
    color: #22d3ee;
  }
</style>
