---
import ApiSidebar from '../../../components/ApiSidebar.astro';
import ApiEndpoint from '../../../components/ApiEndpoint.astro';
import BaseLayout from '../../../layouts/BaseLayout.astro';
// Import the data directly
// @ts-ignore
import openapi from '../../../data/v1.json';

const { slug } = Astro.params;
const endpoint = slug || '';
---

<BaseLayout title={`API Reference - ${endpoint || 'Overview'}`}>
<div class="api-container flex flex-col md:flex-row min-h-screen">
  <div class="hidden md:block h-full">
    <ApiSidebar openapi={openapi} />
  </div>
  <main class="flex-1 p-6 overflow-y-auto w-full">
    {endpoint ? (
        <ApiEndpoint openapi={openapi} endpoint={endpoint} />
    ) : (
        <div class="prose dark:prose-invert max-w-none">
            <h1 class="text-3xl font-bold mb-4 text-[var(--gs-text-primary)]">{openapi.info.title}</h1>
            <p class="text-[var(--gs-text-secondary)] mb-8">{openapi.info.description}</p>
            <p class="text-[var(--gs-text-secondary)]">Version: {openapi.info.version}</p>
        </div>
    )}
  </main>
</div>
</BaseLayout>
