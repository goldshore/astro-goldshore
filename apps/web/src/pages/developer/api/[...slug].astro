---
import ApiSidebar from '../../../components/ApiSidebar.astro';
import ApiEndpoint from '../../../components/ApiEndpoint.astro';
// Import the data directly
// @ts-ignore
import openapiData from '../../../data/v1.json';

const version = 'v1';
const openapi = openapiData;

const { slug } = Astro.params;
// Handle slug as array or string depending on Astro version/config, usually string for [...slug] but params might be parsed.
// actually Astro.params.slug is a string for [...slug].
const endpointId = slug || '';

const paths = Object.entries(openapi.paths || {});
---

<html>
  <body class="api-body">

    <ApiSidebar openapi={openapi} />

    <main class="api-main">
      {endpointId
        ? <ApiEndpoint openapi={openapi} endpointId={endpointId} />
        : <h1>API Reference â€” {version}</h1>
      }
    </main>

  </body>
</html>

<style>
  body {
    margin: 0;
    font-family: system-ui, sans-serif;
    display: flex;
    background: #020617;
    color: #f8fafc;
  }
  .api-main {
    flex: 1;
    padding: 2rem;
    height: 100vh;
    overflow-y: auto;
  }
</style>
