---
const { tabs = [] } = Astro.props;
---

<div class="gs-tabs">
  <div class="gs-tabs-header">
    {tabs.map((t) => (
      <button onclick={`showTab(event, '${t.id}')`}>{t.label}</button>
    ))}
  </div>

  <!--
    Refactored to avoid dynamic slot names which are not supported in Astro.
    Consumers should place content directly in the default slot,
    or we can implement a specific content structure if needed in the future.
    For now, we render the default slot.
  -->
  <div class="gs-tab-content">
      <slot />
  </div>
</div>

<script is:inline>
  window.showTab = function(event, id) {
    const container = event.target.closest('.gs-tabs');
    if (!container) return;

    // Deactivate all content tabs in this container
    const contentTabs = container.querySelectorAll('.gs-tab');
    contentTabs.forEach((el) => {
        if (el.id === id) {
            el.style.display = 'block';
        } else {
            el.style.display = 'none';
        }
    });
  }
</script>

<style>
  .gs-tabs-header {
    display: flex;
    gap: 0.5rem;
    margin-bottom: 1rem;
  }
  .gs-tabs-header button {
    background: var(--gs-bg-panel);
    border: 1px solid var(--gs-border);
    padding: 0.45rem 1rem;
    border-radius: var(--gs-radius-md);
    color: var(--gs-fg-muted);
    cursor: pointer;
    font-family: inherit;
  }
  .gs-tabs-header button:hover {
      background: var(--gs-bg-elevated);
      color: var(--gs-fg);
  }
</style>
